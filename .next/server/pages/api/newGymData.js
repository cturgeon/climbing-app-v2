"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/newGymData";
exports.ids = ["pages/api/newGymData"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "(api)/./helpers/db-util.js":
/*!****************************!*\
  !*** ./helpers/db-util.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"connectToDatabase\": () => (/* binding */ connectToDatabase),\n/* harmony export */   \"deleteGym\": () => (/* binding */ deleteGym),\n/* harmony export */   \"getAllGymData\": () => (/* binding */ getAllGymData),\n/* harmony export */   \"getGymById\": () => (/* binding */ getGymById),\n/* harmony export */   \"insertGym\": () => (/* binding */ insertGym)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function connectToDatabase() {\n    const client = await mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient.connect(`mongodb+srv://${\"cturgeon\"}:${\"NgVzQdYr4CtZ7trk\"}@${\"cluster0\"}.trzrj.mongodb.net/${\"gym-data\"}?retryWrites=true&w=majority`);\n    return client;\n}\nasync function insertGym(client, collection, gymData) {\n    const db = client.db();\n    const result = await db.collection(collection).insertOne(gymData);\n    return result;\n}\nasync function getAllGymData(client, collection, sort) {\n    const db = client.db();\n    const gymData = await db.collection(collection).find().sort(sort).toArray();\n    return gymData;\n}\nasync function deleteGym(client, collection, id) {\n    const db = client.db();\n    await db.collection(collection).deleteOne(id);\n    return;\n}\nasync function getGymById(client, collecion, id) {\n    const db = client.db();\n    const gymData = await db.collection(collection).find(id);\n    return gymData;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9oZWxwZXJzL2RiLXV0aWwuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFzQztBQUUvQixlQUFlQyxpQkFBaUIsR0FBRztJQUN4QyxNQUFNQyxNQUFNLEdBQUcsTUFBTUYsd0RBQW1CLENBQ3RDLENBQUMsY0FBYyxFQUFFSSxVQUE0QixDQUFDLENBQUMsRUFBRUEsa0JBQTRCLENBQUMsQ0FBQyxFQUFFQSxVQUErQixDQUFDLG1CQUFtQixFQUFFQSxVQUE0QixDQUFDLDRCQUE0QixDQUFDLENBQ2pNO0lBQ0QsT0FBT0YsTUFBTSxDQUFDO0NBQ2Y7QUFFTSxlQUFlUSxTQUFTLENBQUNSLE1BQU0sRUFBRVMsVUFBVSxFQUFFQyxPQUFPLEVBQUU7SUFDM0QsTUFBTUMsRUFBRSxHQUFHWCxNQUFNLENBQUNXLEVBQUUsRUFBRTtJQUN0QixNQUFNQyxNQUFNLEdBQUcsTUFBTUQsRUFBRSxDQUFDRixVQUFVLENBQUNBLFVBQVUsQ0FBQyxDQUFDSSxTQUFTLENBQUNILE9BQU8sQ0FBQztJQUNqRSxPQUFPRSxNQUFNLENBQUM7Q0FDZjtBQUVNLGVBQWVFLGFBQWEsQ0FBQ2QsTUFBTSxFQUFFUyxVQUFVLEVBQUVNLElBQUksRUFBRTtJQUM1RCxNQUFNSixFQUFFLEdBQUdYLE1BQU0sQ0FBQ1csRUFBRSxFQUFFO0lBQ3RCLE1BQU1ELE9BQU8sR0FBRyxNQUFNQyxFQUFFLENBQUNGLFVBQVUsQ0FBQ0EsVUFBVSxDQUFDLENBQUNPLElBQUksRUFBRSxDQUFDRCxJQUFJLENBQUNBLElBQUksQ0FBQyxDQUFDRSxPQUFPLEVBQUU7SUFDM0UsT0FBT1AsT0FBTyxDQUFDO0NBQ2hCO0FBRU0sZUFBZVEsU0FBUyxDQUFDbEIsTUFBTSxFQUFFUyxVQUFVLEVBQUVVLEVBQUUsRUFBRTtJQUN0RCxNQUFNUixFQUFFLEdBQUdYLE1BQU0sQ0FBQ1csRUFBRSxFQUFFO0lBQ3RCLE1BQU1BLEVBQUUsQ0FBQ0YsVUFBVSxDQUFDQSxVQUFVLENBQUMsQ0FBQ1csU0FBUyxDQUFDRCxFQUFFLENBQUMsQ0FBQztJQUM5QyxPQUFPO0NBQ1I7QUFFTSxlQUFlRSxVQUFVLENBQUNyQixNQUFNLEVBQUVzQixTQUFTLEVBQUVILEVBQUUsRUFBRTtJQUN0RCxNQUFNUixFQUFFLEdBQUdYLE1BQU0sQ0FBQ1csRUFBRSxFQUFFO0lBQ3RCLE1BQU1ELE9BQU8sR0FBRyxNQUFNQyxFQUFFLENBQUNGLFVBQVUsQ0FBQ0EsVUFBVSxDQUFDLENBQUNPLElBQUksQ0FBQ0csRUFBRSxDQUFDO0lBQ3hELE9BQU9ULE9BQU8sQ0FBQztDQUNoQiIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaW1iaW5nLWFwcC12MS8uL2hlbHBlcnMvZGItdXRpbC5qcz9mNTc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0VG9EYXRhYmFzZSgpIHtcclxuICBjb25zdCBjbGllbnQgPSBhd2FpdCBNb25nb0NsaWVudC5jb25uZWN0KFxyXG4gICAgYG1vbmdvZGIrc3J2Oi8vJHtwcm9jZXNzLmVudi5tb25nb2RiX3VzZXJuYW1lfToke3Byb2Nlc3MuZW52Lm1vbmdvZGJfcGFzc3dvcmR9QCR7cHJvY2Vzcy5lbnYubW9uZ29kYl9jbHVzdGVybmFtZX0udHJ6cmoubW9uZ29kYi5uZXQvJHtwcm9jZXNzLmVudi5tb25nb2RiX2RhdGFiYXNlfT9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHlgXHJcbiAgKTtcclxuICByZXR1cm4gY2xpZW50O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0R3ltKGNsaWVudCwgY29sbGVjdGlvbiwgZ3ltRGF0YSkge1xyXG4gIGNvbnN0IGRiID0gY2xpZW50LmRiKCk7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5pbnNlcnRPbmUoZ3ltRGF0YSk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbEd5bURhdGEoY2xpZW50LCBjb2xsZWN0aW9uLCBzb3J0KSB7XHJcbiAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcclxuICBjb25zdCBneW1EYXRhID0gYXdhaXQgZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5maW5kKCkuc29ydChzb3J0KS50b0FycmF5KCk7XHJcbiAgcmV0dXJuIGd5bURhdGE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVHeW0oY2xpZW50LCBjb2xsZWN0aW9uLCBpZCkge1xyXG4gIGNvbnN0IGRiID0gY2xpZW50LmRiKCk7XHJcbiAgYXdhaXQgZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5kZWxldGVPbmUoaWQpO1xyXG4gIHJldHVybjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEd5bUJ5SWQoY2xpZW50LCBjb2xsZWNpb24sIGlkKSB7XHJcbiAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcclxuICBjb25zdCBneW1EYXRhID0gYXdhaXQgZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5maW5kKGlkKTtcclxuICByZXR1cm4gZ3ltRGF0YTtcclxufVxyXG4iXSwibmFtZXMiOlsiTW9uZ29DbGllbnQiLCJjb25uZWN0VG9EYXRhYmFzZSIsImNsaWVudCIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwibW9uZ29kYl91c2VybmFtZSIsIm1vbmdvZGJfcGFzc3dvcmQiLCJtb25nb2RiX2NsdXN0ZXJuYW1lIiwibW9uZ29kYl9kYXRhYmFzZSIsImluc2VydEd5bSIsImNvbGxlY3Rpb24iLCJneW1EYXRhIiwiZGIiLCJyZXN1bHQiLCJpbnNlcnRPbmUiLCJnZXRBbGxHeW1EYXRhIiwic29ydCIsImZpbmQiLCJ0b0FycmF5IiwiZGVsZXRlR3ltIiwiaWQiLCJkZWxldGVPbmUiLCJnZXRHeW1CeUlkIiwiY29sbGVjaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./helpers/db-util.js\n");

/***/ }),

/***/ "(api)/./pages/api/newGymData.js":
/*!*********************************!*\
  !*** ./pages/api/newGymData.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _helpers_db_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../helpers/db-util */ \"(api)/./helpers/db-util.js\");\n\n\nasync function handler(req, res) {\n    let client;\n    try {\n        client = await (0,_helpers_db_util__WEBPACK_IMPORTED_MODULE_1__.connectToDatabase)();\n    } catch (error) {\n        res.status(500).json({\n            message: \"could not connect to DB!\"\n        });\n        return;\n    }\n    if (req.method === \"POST\") {\n        const { name , address , description , image  } = req.body;\n        // TODO add more validation and complete\n        if (!name || !address || !description || !image) {\n            return;\n        }\n        const newData = {\n            name,\n            address,\n            description,\n            image\n        };\n        let result;\n        try {\n            result = await (0,_helpers_db_util__WEBPACK_IMPORTED_MODULE_1__.insertGym)(client, \"gym-data\", newData);\n            newData._id = result.insertedId;\n            res.status(201).json({\n                message: \"stored new gym data\",\n                message: newData\n            });\n        } catch (error) {\n            res.status(500).json({\n                message: \"failed to submit data\"\n            });\n            return;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbmV3R3ltRGF0YS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW1DO0FBT0o7QUFFaEIsZUFBZU0sT0FBTyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUM5QyxJQUFJQyxNQUFNO0lBQ1YsSUFBSTtRQUNGQSxNQUFNLEdBQUcsTUFBTVIsbUVBQWlCLEVBQUUsQ0FBQztLQUNwQyxDQUFDLE9BQU9TLEtBQUssRUFBRTtRQUNkRixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1lBQUVDLE9BQU8sRUFBRSwwQkFBMEI7U0FBRSxDQUFDLENBQUM7UUFDOUQsT0FBTztLQUNSO0lBRUQsSUFBSU4sR0FBRyxDQUFDTyxNQUFNLEtBQUssTUFBTSxFQUFFO1FBQ3pCLE1BQU0sRUFBRUMsSUFBSSxHQUFFQyxPQUFPLEdBQUVDLFdBQVcsR0FBRUMsS0FBSyxHQUFFLEdBQUdYLEdBQUcsQ0FBQ1ksSUFBSTtRQUV0RCx3Q0FBd0M7UUFDeEMsSUFBSSxDQUFDSixJQUFJLElBQUksQ0FBQ0MsT0FBTyxJQUFJLENBQUNDLFdBQVcsSUFBSSxDQUFDQyxLQUFLLEVBQUU7WUFDL0MsT0FBTztTQUNSO1FBRUQsTUFBTUUsT0FBTyxHQUFHO1lBQ2RMLElBQUk7WUFDSkMsT0FBTztZQUNQQyxXQUFXO1lBQ1hDLEtBQUs7U0FDTjtRQUVELElBQUlHLE1BQU07UUFDVixJQUFJO1lBQ0ZBLE1BQU0sR0FBRyxNQUFNbkIsMkRBQVMsQ0FBQ08sTUFBTSxFQUFFLFVBQVUsRUFBRVcsT0FBTyxDQUFDLENBQUM7WUFDdERBLE9BQU8sQ0FBQ0UsR0FBRyxHQUFHRCxNQUFNLENBQUNFLFVBQVUsQ0FBQztZQUNoQ2YsR0FBRyxDQUNBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1hDLElBQUksQ0FBQztnQkFBRUMsT0FBTyxFQUFFLHFCQUFxQjtnQkFBRUEsT0FBTyxFQUFFTyxPQUFPO2FBQUUsQ0FBQyxDQUFDO1NBQy9ELENBQUMsT0FBT1YsS0FBSyxFQUFFO1lBQ2RGLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU8sRUFBRSx1QkFBdUI7YUFBRSxDQUFDLENBQUM7WUFDM0QsT0FBTztTQUNSO0tBQ0Y7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaW1iaW5nLWFwcC12MS8uL3BhZ2VzL2FwaS9uZXdHeW1EYXRhLmpzP2RkODciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tIFwibW9uZ29kYlwiO1xyXG5pbXBvcnQge1xyXG4gIGNvbm5lY3RUb0RhdGFiYXNlLFxyXG4gIGluc2VydEd5bSxcclxuICBkZWxldGVHeW0sXHJcbiAgZ2V0QWxsR3ltRGF0YSxcclxuICBnZXRHeW1CeUlkLFxyXG59IGZyb20gXCIuLi8uLi9oZWxwZXJzL2RiLXV0aWxcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBsZXQgY2xpZW50O1xyXG4gIHRyeSB7XHJcbiAgICBjbGllbnQgPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IFwiY291bGQgbm90IGNvbm5lY3QgdG8gREIhXCIgfSk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBpZiAocmVxLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcclxuICAgIGNvbnN0IHsgbmFtZSwgYWRkcmVzcywgZGVzY3JpcHRpb24sIGltYWdlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBUT0RPIGFkZCBtb3JlIHZhbGlkYXRpb24gYW5kIGNvbXBsZXRlXHJcbiAgICBpZiAoIW5hbWUgfHwgIWFkZHJlc3MgfHwgIWRlc2NyaXB0aW9uIHx8ICFpbWFnZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3RGF0YSA9IHtcclxuICAgICAgbmFtZSxcclxuICAgICAgYWRkcmVzcyxcclxuICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgIGltYWdlLFxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmVzdWx0ID0gYXdhaXQgaW5zZXJ0R3ltKGNsaWVudCwgXCJneW0tZGF0YVwiLCBuZXdEYXRhKTtcclxuICAgICAgbmV3RGF0YS5faWQgPSByZXN1bHQuaW5zZXJ0ZWRJZDtcclxuICAgICAgcmVzXHJcbiAgICAgICAgLnN0YXR1cygyMDEpXHJcbiAgICAgICAgLmpzb24oeyBtZXNzYWdlOiBcInN0b3JlZCBuZXcgZ3ltIGRhdGFcIiwgbWVzc2FnZTogbmV3RGF0YSB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJmYWlsZWQgdG8gc3VibWl0IGRhdGFcIiB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiT2JqZWN0SWQiLCJjb25uZWN0VG9EYXRhYmFzZSIsImluc2VydEd5bSIsImRlbGV0ZUd5bSIsImdldEFsbEd5bURhdGEiLCJnZXRHeW1CeUlkIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImNsaWVudCIsImVycm9yIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJtZXRob2QiLCJuYW1lIiwiYWRkcmVzcyIsImRlc2NyaXB0aW9uIiwiaW1hZ2UiLCJib2R5IiwibmV3RGF0YSIsInJlc3VsdCIsIl9pZCIsImluc2VydGVkSWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/newGymData.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/newGymData.js"));
module.exports = __webpack_exports__;

})();